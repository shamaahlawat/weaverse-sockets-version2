{"version":3,"sources":["../../src/db/mongoose.js"],"names":["MONGODB_USERNAME","username","MONGODB_PASSWORD","password","MONGODB_HOST","host","MONGODB_PORT","port","MONGODB_DATABASE_NAME","databaseName","MLAB_USER","mlab_user","MLAB_PASSWORD","mlab_password","CONFIG","mongoose","Promise","global","MONGODB_URI","console","log","options","reconnectTries","Number","MAX_VALUE","reconnectInterval","useNewUrlParser","connect","set","connection","on","info","err","error","process","exit"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,MAAM;AACJA,oBAAkBC,QADd;AAEJC,oBAAkBC,QAFd;AAGJC,gBAAcC,IAHV;AAIJC,gBAAcC,IAJV;AAKJC,yBAAuBC,YALnB;AAMJC,aAAWC,SANP;AAOJC,iBAAeC;AAPX,IAQFC,gBARJ;;AAUAC,mBAASC,OAAT,GAAmBC,OAAOD,OAA1B;;AAGA,MAAME,cAAe,iBAAgBP,SAAU,IAAGE,aAAc,yDAAhE;;AAEA;;;AAIAM,QAAQC,GAAR,CAAY,kBAAZ,EAAgCF,WAAhC;AACA,MAAMG,UAAU;AACdC,kBAAgBC,OAAOC,SADT,EACoB;AAClCC,qBAAmB,GAFL,EAEU;AACxBC,mBAAiB;AAHH,CAAhB;;AAMAX,mBAASY,OAAT,CAAiBT,WAAjB,EAA8BG,OAA9B;AACAN,mBAASa,GAAT,CAAa,gBAAb,EAA+B,IAA/B;;AAIAb,mBAASc,UAAT,CAAoBC,EAApB,CAAuB,WAAvB,EAAoC,MAAM;AACxC;AACAX,UAAQY,IAAR,CAAc,sBAAd;AACD,CAHD;AAIAhB,mBAASc,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAgCE,OAAO;AACrC;AACAb,UAAQc,KAAR,CAAe,2BAAf,EAA2CD,GAA3C;AACAE,UAAQC,IAAR,CAAa,CAAC,CAAd;AACD,CAJD;;AAMApB,mBAASc,UAAT,CAAoBC,EAApB,CAAuB,cAAvB,EAAuC,MAAM;AAC3C;AACAX,UAAQc,KAAR,CAAc,sBAAd;AACD,CAHD;;kBAKelB,kB","file":"mongoose.js","sourcesContent":["import mongoose from 'mongoose';\nimport CONFIG from '../config';\n\nconst {\n  MONGODB_USERNAME: username,\n  MONGODB_PASSWORD: password,\n  MONGODB_HOST: host,\n  MONGODB_PORT: port,\n  MONGODB_DATABASE_NAME: databaseName,\n  MLAB_USER: mlab_user,\n  MLAB_PASSWORD: mlab_password\n} = CONFIG;\n\nmongoose.Promise = global.Promise;\n\n\nconst MONGODB_URI = `mongodb+srv://${mlab_user}:${mlab_password}@cluster0-b9rob.mongodb.net/weaverseV3?retryWrites=true`;\n\n// const MONGODB_URI = 'mongodb://127.0.0.1:27017/weaverse'\n\n\n\nconsole.log('MONGO CONNECTION', MONGODB_URI);\nconst options = {\n  reconnectTries: Number.MAX_VALUE, // Never stop trying to reconnect\n  reconnectInterval: 500, // Reconnect every 500ms\n  useNewUrlParser: true,\n};\n\nmongoose.connect(MONGODB_URI, options);\nmongoose.set('useCreateIndex', true);\n\n\n\nmongoose.connection.on('connected', () => {\n  // eslint-disable-next-line no-console\n  console.info(`Connected to MongoDB`);\n});\nmongoose.connection.on('error', err => {\n  // eslint-disable-next-line no-console\n  console.error(`MongoDB connection error:`, err);\n  process.exit(-1);\n});\n\nmongoose.connection.on('disconnected', () => {\n  // eslint-disable-next-line no-console\n  console.error('MongoDB disconnected');\n});\n\nexport default mongoose;\n"]}